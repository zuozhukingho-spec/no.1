<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>N.S.B. å…§éƒ¨å®‰å…¨å¯©æŸ¥ç³»çµ± - å¯¦æˆ°è€ƒæ ¸</title>
    <style>
        /* --- 1. è¦–è¦ºæ ¸å¿ƒï¼šåš´è‚…è­¦å‹™/æ”¿åºœå…§ç¶²é¢¨æ ¼ --- */
        :root {
            --police-dark: #0a2342;       /* æ·±æµ·è»è— */
            --police-blue: #0056b3;       /* äº¤äº’è— */
            --police-light: #e6f0ff;      /* æ·ºè—èƒŒæ™¯ */
            --text-main: #1a1a1a;
            --white: #ffffff;
            --glass: rgba(255, 255, 255, 0.98);
            --shadow: 0 8px 30px rgba(10, 35, 66, 0.2);
            --border: #cadae8;
        }

        body {
            margin: 0;
            padding: 0;
            background-color: #f4f7fa;
            background-image: 
                linear-gradient(rgba(10, 35, 66, 0.05) 1px, transparent 1px),
                linear-gradient(90deg, rgba(10, 35, 66, 0.05) 1px, transparent 1px);
            background-size: 50px 50px;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            height: 100vh;
            overflow: hidden;
            user-select: none;
            position: relative;
        }

        /* --- 2. é ‚éƒ¨ç‹€æ…‹æ¬„ (HUD) --- */
        .top-hud {
            position: absolute;
            top: 0; left: 0; width: 100%;
            height: 60px;
            background: var(--police-dark);
            color: white;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 30px;
            box-sizing: border-box;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            z-index: 100;
        }
        
        .logo-area {
            font-weight: 700;
            font-size: 1.1rem;
            letter-spacing: 1px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .progress-module {
            display: flex;
            align-items: center;
            gap: 15px;
            background: rgba(255,255,255,0.1);
            padding: 8px 15px;
            border-radius: 4px;
        }
        .progress-track {
            width: 200px;
            height: 8px;
            background: rgba(0,0,0,0.3);
            border-radius: 4px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            width: 0%;
            background: #00d2ff;
            transition: width 0.5s cubic-bezier(0.25, 1, 0.5, 1);
            box-shadow: 0 0 10px #00d2ff;
        }

        /* --- 3. äººç‰©ç«‹ç¹ªå±¤ --- */
        #character-stage {
            position: absolute;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 10;
            pointer-events: none;
            overflow: hidden;
        }

        .character-img {
            position: absolute;
            left: 50%;
            bottom: 0;
            transform: translateX(-50%);
            
            max-height: 95vh;
            width: auto;
            max-width: 85vw;
            
            filter: drop-shadow(0 0 15px rgba(255, 255, 255, 0.5));
            animation: breathe 4s ease-in-out infinite; 
            transition: opacity 0.5s, filter 0.5s; /* å¢åŠ éæ¸¡æ•ˆæœ */
            
            /* ã€ä¿®æ”¹ã€‘åˆå§‹ç‹€æ…‹è¨­ç‚ºé€æ˜ */
            opacity: 0; 
        }

        @keyframes breathe {
            0%, 100% { transform: translateX(-50%) scale(1); }
            50% { transform: translateX(-50%) scale(1.02); }
        }

        /* --- 4. å°è©±æ¡† --- */
        #dialogue-layer {
            position: absolute;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            max-width: 1100px;
            height: 240px;
            z-index: 50;
            pointer-events: auto;
            cursor: pointer;
        }

        .dialogue-box {
            width: 100%;
            height: 100%;
            background: var(--glass);
            border: 1px solid var(--border);
            border-top: 4px solid var(--police-dark);
            border-radius: 8px;
            padding: 50px 40px 30px 40px;
            box-sizing: border-box;
            box-shadow: var(--shadow);
            backdrop-filter: blur(15px);
            display: flex;
            flex-direction: column;
        }

        .name-tag {
            position: absolute;
            top: -22px;
            left: 40px;
            background: var(--police-dark);
            color: white;
            padding: 8px 35px;
            font-size: 1.1rem;
            font-weight: bold;
            border-radius: 4px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .name-tag::before {
            content: '';
            display: block;
            width: 8px; height: 8px;
            background: #00d2ff;
            border-radius: 50%;
            box-shadow: 0 0 5px #00d2ff;
        }

        .text-content {
            font-size: 1.2rem;
            line-height: 1.6;
            color: var(--text-main);
            font-weight: 500;
            flex: 1;
        }

        .next-indicator {
            align-self: flex-end;
            color: var(--police-blue);
            font-size: 0.9rem;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 5px;
            animation: bounce 1s infinite;
            opacity: 0.8;
        }

        @keyframes bounce { 0%, 100% { transform: translateX(0); } 50% { transform: translateX(5px); } }

        /* --- é®ç½©å±¤ --- */
        .overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: white;
            z-index: 1000;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            transition: opacity 0.5s;
        }
        .btn-start {
            margin-top: 30px;
            padding: 15px 40px;
            background: var(--police-dark);
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 1.2rem;
            cursor: pointer;
            font-weight: bold;
        }
        .btn-start:hover { background: var(--police-blue); }

    </style>
</head>
<body>

    <div class="top-hud">
        <div class="logo-area">
            <span>ğŸ›¡ï¸</span> 
            <span>N.S.B. ç¶²çµ¡å®‰å…¨å±€ | å¯¦æˆ°è€ƒæ ¸ç³»çµ±</span>
        </div>
        <div class="progress-module">
            <span style="font-size: 0.85rem; opacity: 0.8;">åŸ¹è¨“é€²åº¦</span>
            <div class="progress-track">
                <div id="progress-bar" class="progress-fill"></div>
            </div>
            <span id="progress-text" style="font-weight:bold;">0%</span>
        </div>
    </div>

    <div id="character-stage">
        <img 
            id="char-img"
            src="https://i.ibb.co/Y4KqtW4B/5.png" 
            alt="Character" 
            class="character-img"
        >
    </div>

    <div id="dialogue-layer" onclick="nextStep()">
        <div class="dialogue-box">
            <div class="name-tag" id="speaker-name">SYSTEM</div>
            <div class="text-content" id="text-box">æ­£åœ¨åˆå§‹åŒ–å®‰å…¨å”è­°...</div>
            <div class="next-indicator">é»æ“Šç¹¼çºŒ â–¶</div>
        </div>
    </div>

    <div id="start-overlay" class="overlay">
        <h1 style="color: var(--police-dark); margin-bottom: 10px;">âš ï¸ ç½‘ç«™æµ‹è¯•ä¸­è¯·å‹¿ä½¿ç”¨</h1>
        <p style="color: #666;">è«‹ç¢ºä¿æ‚¨çš„ç¥ç¶“é€£æ¥ç©©å®š</p>
        <button class="btn-start" onclick="initGame()">é–‹å§‹éˆæ¥</button>
    </div>

    <script>
        // --- åœ–ç‰‡ URL é…ç½® ---
        const IMG_NORMAL = "https://i.ibb.co/Y4KqtW4B/5.png";
        const IMG_WARNING = "https://i.ibb.co/LdXDrqzM/6.png";

        // --- åœ–ç‰‡åŠ è¼‰éŒ¯èª¤è™•ç† ---
        document.getElementById('char-img').onerror = function() {
            // éœé»˜å¤±æ•—æˆ–æ›¿æ›ç‚ºä½”ä½ç¬¦
            console.log("Image load failed");
        };

        // --- éŠæˆ²æ•¸æ“š ---
        const gameState = {
            step: 0,
            typing: false
        };

        const els = {
            speaker: document.getElementById('speaker-name'),
            text: document.getElementById('text-box'),
            progressBar: document.getElementById('progress-bar'),
            progressText: document.getElementById('progress-text'),
            startOverlay: document.getElementById('start-overlay'),
            charImg: document.getElementById('char-img')
        };

        // --- åŠ‡æœ¬å…§å®¹ ã€ä¿®æ”¹ã€‘åå­—æ”¹ç‚ºèŒ‰è‰ ---
        const script = [
            {
                // Index 0
                speaker: 'SYSTEM',
                text: 'ã€ç³»çµ±æç¤ºã€‘ç”Ÿç‰©è­˜åˆ¥é€šéã€‚æ­£åœ¨å»ºç«‹åŠ å¯†é€šè¨Š...'
            },
            {
                // Index 1
                speaker: 'èŒ‰è‰ (åŸ¹è¨“å®˜)',
                text: 'çœ‹èµ·æ¥ä½ çŠ¶æ€ä¸é”™å˜›!'
            },
            {
                // Index 2 - åœ–ç‰‡é–‹å§‹å‡ºç¾
                speaker: 'èŒ‰è‰ (åŸ¹è¨“å®˜)',
                text: 'æ—©ä¸Šå¥½ï¼Œæ–°å…µã€‚æˆ‘æ˜¯ Evaï¼Œä½ çš„å…¥è·å¼•å°å“¡ã€‚çœ‹ä¾†ä½ æ¯”é å®šæ™‚é–“æ—©åˆ°äº†å…©åˆ†é˜ï¼Œä¸éŒ¯çš„ç¿’æ…£ã€‚'
            },
            {
                // Index 3
                speaker: 'èŒ‰è‰ (åŸ¹è¨“å®˜)',
                text: 'æ—¢ç„¶ä½ å·²ç¶“ç©¿ä¸Šäº†é€™èº«åˆ¶æœï¼Œå°±æ„å‘³è‘—ä½ å·²ç¶“åšå¥½äº†å°‡å¤§è…¦æ¥å…¥è…¦æœº,æŠŠè‡ªå·±æš´éœ²åœ¨å±é™©ç¯å¢ƒçš„æº–å‚™ã€‚'
            },
            {
                // Index 4
                speaker: 'èŒ‰è‰ (åŸ¹è¨“å®˜)',
                text: 'åœ¨æŠŠä½ ç§»äº¤çµ¦é‚£äº›æ€§æ ¼è¿¥å¼‚çš„å¯¦æˆ°è€ƒå®˜ä¹‹å‰ï¼Œæˆ‘éœ€è¦ç¢ºèªä½ æ˜¯å¦è¨˜ä½äº†ã€ç”Ÿå­˜ä¸‰æ³•å‰‡ã€‘ã€‚åœ¨äºŒåäºŒä¸–çºªçš„äº’è¯ç¶²ï¼Œéºå¿˜æ³•å‰‡å°±æ„å‘³è‘—æ­»äº¡'
            },
            {
                // Index 5 - åœ–ç‰‡åˆ‡æ›ç‚ºè­¦å‘Šç‹€æ…‹ (6.png)
                speaker: 'èŒ‰è‰ (åŸ¹è¨“å®˜)',
                text: 'æ³•å‰‡ä¸€ï¼šã€é›¶ä¿¡ä»» (Zero Trust)ã€‘ã€‚ä¸è¦ç›¸ä¿¡ä»»ä½•æœªç¶“é©—è­‰çš„æ•¸æ“šï¼Œå“ªæ€•ç™¼ä»¶äººé¡¯ç¤ºæ˜¯ä½ çš„è¦ªç”Ÿæ¯è¦ªã€‚'
            },
            {
                // Index 6
                speaker: 'èŒ‰è‰ (åŸ¹è¨“å®˜)',
                text: 'æ³•å‰‡äºŒï¼šã€ç¥ç¶“é˜²ç«ç‰†ã€‘ã€‚æ°¸é ä¿æŒä½ çš„é˜²ç«å¢™å’Œé˜²æ¯’è½¯ä»¶è™•æ–¼å¼€å¯ç‹€æ…‹ã€‚é»‘å®¢æœ€å–œæ­¡æ”»æ“Šé‚£äº›ç‚ºäº†â€œä¸‹è¼‰é€Ÿåº¦â€è€Œé—œé–‰é˜²ç«ç‰†çš„æ„£å¤´é’ã€‚'
            },
            {
                // Index 7
                speaker: 'èŒ‰è‰ (åŸ¹è¨“å®˜)',
                text: 'å¸Œæœ›ä½ æ²¡åšè¿‡'
            },
            {
                // Index 8
                speaker: 'èŒ‰è‰ (åŸ¹è¨“å®˜)',
                text: 'æ³•å‰‡ä¸‰ï¼šã€ç‰©ç†éš”çµ•ã€‘ã€‚è·¯é‚Šæ’¿åˆ°çš„ä¸æ˜å­˜å„²èŠ¯ç‰‡çµ•å°ä¸è¦æ’å…¥çµ‚ç«¯ã€‚é€™è½èµ·ä¾†å¾ˆè ¢ï¼Œä½†æ¯å¹´æˆ‘å€‘éƒ½è¦è™•ç†å¹¾ç™¾å€‹å› æ­¤è…¦æœºä¸­æ¯’çš„ç‰¹å·¥ã€‚'
            },
            {
                // Index 9
                speaker: 'èŒ‰è‰ (åŸ¹è¨“å®˜)',
                text: 'å¾ˆå¥½ï¼Œä½ çš„å¿ƒç‡æ•¸æ“šå¾ˆç©©å®šã€‚çœ‹ä¾†ä½ å…·å‚™æˆç‚ºé«˜ç´šå®‰å…¨å®˜çš„æ½›è³ªã€‚'
            },
            {
                // Index 10
                speaker: 'èŒ‰è‰ (åŸ¹è¨“å®˜)',
                text: 'æˆ‘çš„å¼•å°ä»»å‹™çµæŸäº†ã€‚ç¾åœ¨ï¼Œæº–å‚™å¥½è¿æ¥çœŸæ­£çš„æŒ‘æˆ°äº†å—ï¼Ÿ'
            },
            {
                // Index 11 - éˆæ¥ä¸­æ–·ï¼Œåœ–ç‰‡æ¶ˆå¤±
                speaker: 'SYSTEM',
                text: 'ã€éˆæ¥ä¸­æ–·ã€‘Eva å·²ä¸‹ç·šã€‚\næ­£åœ¨è½‰æ¥è‡³å¯¦æˆ°é¶å ´...\n(DEMO çµæŸ)'
            }
        ];

        // --- æ ¸å¿ƒé‚è¼¯ ---

        function initGame() {
            els.startOverlay.style.opacity = '0';
            setTimeout(() => { els.startOverlay.style.display = 'none'; }, 500);
            renderStep();
        }

        function updateProgress() {
            const percentage = Math.floor(((gameState.step + 1) / script.length) * 100);
            els.progressBar.style.width = percentage + '%';
            els.progressText.innerText = percentage + '%';
        }

        function updateCharacterImage(stepIndex) {
            // ã€ä¿®æ”¹ã€‘æ ¸å¿ƒåœ–ç‰‡æ§åˆ¶é‚è¼¯
            
            // 1. å¦‚æœæ˜¯ "æ—©ä¸Šå¥½" (Index 2)ï¼Œé¡¯ç¤ºæ­£å¸¸åœ–ç‰‡
            if (stepIndex === 2) {
                els.charImg.src = IMG_NORMAL;
                els.charImg.style.opacity = '1';
            }
            // 2. å¦‚æœæ˜¯ "æ³•å‰‡ä¸€" (Index 5)ï¼Œåˆ‡æ›ç‚ºè­¦å‘Šåœ–ç‰‡
            else if (stepIndex === 5) {
                els.charImg.src = IMG_WARNING;
            }
            // 3. å¦‚æœæ˜¯ "éˆæ¥ä¸­æ–·" (Index 11)ï¼Œéš±è—åœ–ç‰‡
            else if (stepIndex === 11) {
                els.charImg.style.opacity = '0';
            }
            // 4. å°æ–¼ Index 0 å’Œ 1 (åœ¨ "æ—©ä¸Šå¥½" ä¹‹å‰)ï¼Œç¢ºä¿éš±è—
            else if (stepIndex < 2) {
                els.charImg.style.opacity = '0';
            }
        }

        function renderStep() {
            const currentScript = script[gameState.step];
            
            // æ›´æ–°åœ–ç‰‡ç‹€æ…‹
            updateCharacterImage(gameState.step);

            // è¨­ç½®åå­—
            els.speaker.innerText = currentScript.speaker;
            
            // åå­—æ¨£å¼å€åˆ†
            if (currentScript.speaker.includes('SYSTEM')) {
                els.speaker.style.background = '#555';
            } else {
                els.speaker.style.background = 'var(--police-dark)';
            }

            // æ‰“å­—æ©Ÿæ•ˆæœ
            els.text.innerHTML = '';
            gameState.typing = true;

            let i = 0;
            const content = currentScript.text;
            
            function typeWriter() {
                if (i < content.length) {
                    if(content.charAt(i) === '\n') {
                        els.text.innerHTML += '<br>';
                    } else {
                        els.text.innerHTML += content.charAt(i);
                    }
                    i++;
                    setTimeout(typeWriter, 25);
                } else {
                    gameState.typing = false;
                }
            }
            typeWriter();
            updateProgress();
        }

        function nextStep() {
            if (gameState.typing) {
                // å¦‚æœæ­£åœ¨æ‰“å­—ï¼Œæš«ä¸è™•ç†
                return;
            }
            gameState.step++;
            if (gameState.step < script.length) {
                renderStep();
            } else {
                alert("æ¼”ç¤ºçµæŸï¼šæº–å‚™é€²å…¥ä¸‹ä¸€é—œ");
                location.reload();
            }
        }
    </script>
</body>
</html>
