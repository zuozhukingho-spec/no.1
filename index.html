<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>N.S.B. å…§éƒ¨å®‰å…¨å¯©æŸ¥ç³»çµ± - å¯¦æˆ°è€ƒæ ¸</title>
    <style>
        /* --- è¦–è¦ºæ ¸å¿ƒ --- */
        :root {
            --police-dark: #0a2342;       
            --police-blue: #0056b3;       
            --text-main: #1a1a1a;
            --glass: rgba(255, 255, 255, 0.98); 
            --shadow: 0 8px 30px rgba(10, 35, 66, 0.2);
            --border: #cadae8;
            --warning-red: #d32f2f; /* è­¦å‘Šç´… */
        }

        body {
            margin: 0; padding: 0;
            background-color: #f4f7fa;
            background-image: 
                linear-gradient(rgba(10, 35, 66, 0.05) 1px, transparent 1px),
                linear-gradient(90deg, rgba(10, 35, 66, 0.05) 1px, transparent 1px);
            background-size: 50px 50px;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            height: 100vh; overflow: hidden; user-select: none;
        }

        /* --- é ‚éƒ¨ç‹€æ…‹æ¬„ --- */
        .top-hud {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 60px;
            background: var(--police-dark);
            color: white; display: flex; align-items: center; justify-content: space-between;
            padding: 0 30px; box-sizing: border-box; z-index: 100;
        }
        
        .progress-track { width: 200px; height: 8px; background: rgba(0,0,0,0.3); border-radius: 4px; overflow: hidden; }
        .progress-fill { height: 100%; width: 0%; background: #00d2ff; transition: width 0.5s ease; }

        /* --- äººç‰©ç«‹ç¹ªå±¤ --- */
        #character-stage {
            position: absolute; top: 0; left: 0; width: 100vw; height: 100vh;
            z-index: 10; pointer-events: none; display: flex; justify-content: center; align-items: flex-end;
        }
        .character-img { max-height: 95vh; width: auto; transition: opacity 0.5s ease; opacity: 0; }

        /* --- å°è©±æ¡† --- */
        #dialogue-layer {
            position: absolute; bottom: 40px; left: 50%; transform: translateX(-50%);
            width: 90%; max-width: 1100px; height: 220px; z-index: 50; cursor: pointer;
        }
        .dialogue-box {
            width: 100%; height: 100%; background: var(--glass); border-radius: 8px;
            padding: 50px 40px; box-sizing: border-box; box-shadow: var(--shadow);
            border-top: 4px solid var(--police-dark); position: relative;
        }
        .name-tag {
            position: absolute; top: -20px; left: 40px; background: var(--police-dark);
            color: white; padding: 8px 30px; font-weight: bold; border-radius: 4px;
        }

        /* --- å•Ÿå‹•ç¬¬ä¸€é  (Overlay) --- */
        .overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #ffffff; z-index: 1000;
            display: flex; justify-content: center; align-items: center; flex-direction: column;
            text-align: center;
        }
        .warning-text {
            color: var(--warning-red);
            font-weight: bold;
            font-size: 1.4rem;
            margin-bottom: 20px;
            padding: 10px 20px;
            border: 2px solid var(--warning-red);
            display: inline-block;
            animation: blink 1.5s infinite;
        }
        @keyframes blink { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; } }

        .btn-start {
            padding: 15px 50px; background: var(--police-dark); color: white;
            border: none; border-radius: 4px; cursor: pointer; font-size: 1.2rem; font-weight: bold;
        }
        .btn-start:hover { background: var(--police-blue); }
    </style>
</head>
<body>

    <div class="top-hud">
        <div style="font-weight: bold;">ğŸ›¡ï¸ N.S.B. ç¶²çµ¡å®‰å…¨å±€</div>
        <div style="display: flex; align-items: center; gap: 15px;">
            <div class="progress-track"><div id="progress-bar" class="progress-fill"></div></div>
            <span id="progress-text">0%</span>
        </div>
    </div>

    <div id="character-stage">
        <img id="char-img" src="" class="character-img">
    </div>

    <div id="dialogue-layer" onclick="nextStep()">
        <div class="dialogue-box">
            <div class="name-tag" id="speaker-name">SYSTEM</div>
            <div id="text-box" style="font-size: 1.25rem; line-height: 1.6;">æ­£åœ¨åˆå§‹åŒ–...</div>
        </div>
    </div>

    <div id="start-overlay" class="overlay">
        <div class="warning-text">âš ï¸ ç¶²ç«™æ¸¬è©¦ä¸­ï¼Œè«‹å‹¿ä½¿ç”¨</div>
        <h1 style="color: var(--police-dark); margin-top: 0;">N.S.B. å…§éƒ¨ç³»çµ±è€ƒæ ¸</h1>
        <p style="color: #666; margin-bottom: 30px;">[ èªè­‰æˆæ¬Šç¢¼ï¼šQC-2024-X ]</p>
        <button class="btn-start" onclick="initGame()">é€²å…¥ç³»çµ±</button>
    </div>

    <script>
        const IMG_NORMAL = "https://i.ibb.co/Y4KqtW4B/5.png";
        const IMG_RULES = "https://i.ibb.co/1tSp2Brm/image.png";

        const gameState = { step: 0, typing: false };
        const els = {
            speaker: document.getElementById('speaker-name'),
            text: document.getElementById('text-box'),
            progressBar: document.getElementById('progress-bar'),
            progressText: document.getElementById('progress-text'),
            startOverlay: document.getElementById('start-overlay'),
            charImg: document.getElementById('char-img')
        };

        const script = [
            {
                speaker: 'SYSTEM',
                text: 'ã€ç³»çµ±æç¤ºã€‘ç”Ÿç‰©è­˜åˆ¥é€šéã€‚æ­£åœ¨å»ºç«‹åŠ å¯†é€šè¨Š...',
                image: null
            },
            {
                speaker: 'èŒ‰è‰(åŸ¹è¨“å®˜)',
                text: 'çœ‹èµ·ä¾†ä½ ç‹€æ…‹ä¸éŒ¯å˜›ï¼',
                image: null
            },
            {
                speaker: 'èŒ‰è‰(åŸ¹è¨“å®˜)',
                text: 'æ—©ä¸Šå¥½ï¼Œæ–°å…µã€‚æˆ‘æ˜¯ èŒ‰è‰ï¼Œä½ çš„å…¥è·å¼•å°å“¡ã€‚çœ‹ä¾†ä½ æ¯”é å®šæ™‚é–“æ—©åˆ°äº†å…©åˆ†é˜ï¼Œä¸éŒ¯çš„ç¿’æ…£ã€‚',
                image: IMG_NORMAL
            },
            {
                speaker: 'èŒ‰è‰(åŸ¹è¨“å®˜)',
                text: 'æ—¢ç„¶ä½ å·²ç¶“ç©¿ä¸Šäº†é€™èº«åˆ¶æœï¼Œå°±æ„å‘³è‘—ä½ å·²ç¶“åšå¥½äº†å°‡å¤§è…¦æ¥å…¥è…¦æ©Ÿï¼ŒæŠŠè‡ªå·±æš´éœ²åœ¨å±éšªç’°å¢ƒçš„æº–å‚™ã€‚',
                image: IMG_NORMAL
            },
            {
                speaker: 'èŒ‰è‰(åŸ¹è¨“å®˜)',
                text: 'åœ¨æŠŠä½ ç§»äº¤çµ¦é‚£äº›æ€§æ ¼è¿¥ç•°çš„å¯¦æˆ°è€ƒå®˜ä¹‹å‰ï¼Œæˆ‘éœ€è¦ç¢ºèªä½ æ˜¯å¦è¨˜ä½äº†ã€ç”Ÿå­˜ä¸‰æ³•å‰‡ã€‘ã€‚',
                image: IMG_RULES
            },
            {
                speaker: 'èŒ‰è‰(åŸ¹è¨“å®˜)',
                text: 'æ³•å‰‡ä¸€ï¼šã€é›¶ä¿¡ä»»ã€‘ã€‚ä¸è¦ç›¸ä¿¡ä»»ä½•æœªç¶“é©—è­‰çš„æ•¸æ“šã€‚',
                image: IMG_RULES
            },
            {
                speaker: 'èŒ‰è‰(åŸ¹è¨“å®˜)',
                text: 'æ³•å‰‡äºŒï¼šã€ç¥ç¶“é˜²ç«ç‰†ã€‘ã€‚æ°¸é ä¿æŒä½ çš„é˜²ç«ç‰†è™•æ–¼é–‹å•Ÿç‹€æ…‹ã€‚',
                image: IMG_RULES
            },
            {
                speaker: 'èŒ‰è‰(åŸ¹è¨“å®˜)',
                text: 'æ³•å‰‡ä¸‰ï¼šã€ç‰©ç†éš”çµ•ã€‘ã€‚è·¯é‚Šæ’¿åˆ°çš„ä¸æ˜å­˜å„²èŠ¯ç‰‡çµ•å°ä¸è¦æ’å…¥çµ‚ç«¯ã€‚',
                image: IMG_RULES
            },
            {
                speaker: 'èŒ‰è‰(åŸ¹è¨“å®˜)',
                text: 'å¾ˆå¥½ï¼Œä½ çš„å¿ƒç‡æ•¸æ“šå¾ˆç©©å®šã€‚çœ‹ä¾†ä½ å…·å‚™æˆç‚ºé«˜ç´šå®‰å…¨å®˜çš„æ½›è³ªã€‚',
                image: IMG_NORMAL
            },
            {
                speaker: 'SYSTEM',
                text: 'ã€éˆæ¥ä¸­æ–·ã€‘èŒ‰è‰ å·²ä¸‹ç·šã€‚æ­£åœ¨è½‰æ¥è‡³å¯¦æˆ°é¶å ´...',
                image: null
            }
        ];

        function initGame() {
            els.startOverlay.style.display = 'none';
            renderStep();
        }

        function renderStep() {
            const data = script[gameState.step];
            
            // åœ–ç‰‡æ§åˆ¶é‚è¼¯
            if (data.image) {
                els.charImg.src = data.image;
                els.charImg.style.opacity = '1';
            } else {
                els.charImg.style.opacity = '0';
            }

            els.speaker.innerText = data.speaker;
            els.text.innerText = '';
            gameState.typing = true;
            
            let i = 0;
            function type() {
                if (i < data.text.length) {
                    els.text.innerText += data.text.charAt(i);
                    i++;
                    setTimeout(type, 30);
                } else {
                    gameState.typing = false;
                }
            }
            type();

            const p = Math.floor(((gameState.step + 1) / script.length) * 100);
            els.progressBar.style.width = p + '%';
            els.progressText.innerText = p + '%';
        }

        function nextStep() {
            if (gameState.typing) return;
            gameState.step++;
            if (gameState.step < script.length) renderStep();
        }
    </script>
</body>
</html>
